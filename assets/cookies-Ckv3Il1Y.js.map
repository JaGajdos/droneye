{"version":3,"file":"cookies-Ckv3Il1Y.js","sources":["../../src/cookies.js"],"sourcesContent":["// Cookie Consent Management\r\n(function() {\r\n    'use strict';\r\n\r\n    const COOKIE_CONSENT_KEY = 'cookie_consent';\r\n    const COOKIE_CONSENT_EXPIRY_DAYS = 365;\r\n\r\n    // Cookie categories\r\n    const COOKIE_CATEGORIES = {\r\n        necessary: 'necessary',\r\n        analytics: 'analytics',\r\n        marketing: 'marketing'\r\n    };\r\n\r\n    // Check if user has already given consent\r\n    function hasConsent() {\r\n        return localStorage.getItem(COOKIE_CONSENT_KEY) !== null;\r\n    }\r\n\r\n    // Get consent data\r\n    function getConsentData() {\r\n        const data = localStorage.getItem(COOKIE_CONSENT_KEY);\r\n        if (!data) return null;\r\n        try {\r\n            return JSON.parse(data);\r\n        } catch (e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    // Save consent to localStorage\r\n    function saveConsent(consentData) {\r\n        const data = {\r\n            ...consentData,\r\n            timestamp: new Date().toISOString(),\r\n            expiry: new Date(Date.now() + COOKIE_CONSENT_EXPIRY_DAYS * 24 * 60 * 60 * 1000).toISOString()\r\n        };\r\n        localStorage.setItem(COOKIE_CONSENT_KEY, JSON.stringify(data));\r\n    }\r\n\r\n    // Show cookie banner\r\n    function showCookieBanner() {\r\n        const banner = document.getElementById('cookie-banner');\r\n        if (banner) {\r\n            banner.style.display = 'block';\r\n            setTimeout(() => {\r\n                banner.classList.add('show');\r\n            }, 100);\r\n        }\r\n    }\r\n\r\n    // Hide cookie banner\r\n    function hideCookieBanner() {\r\n        const banner = document.getElementById('cookie-banner');\r\n        if (banner) {\r\n            banner.classList.remove('show');\r\n            setTimeout(() => {\r\n                banner.style.display = 'none';\r\n            }, 300);\r\n        }\r\n    }\r\n\r\n    // Show cookie settings modal\r\n    function showCookieSettings() {\r\n        const modal = document.getElementById('cookie-settings-modal');\r\n        if (!modal) {\r\n            createCookieSettingsModal();\r\n        }\r\n        const modalElement = document.getElementById('cookie-settings-modal');\r\n        if (modalElement) {\r\n            modalElement.style.display = 'flex';\r\n            setTimeout(() => {\r\n                modalElement.classList.add('show');\r\n            }, 10);\r\n            \r\n            // Load current settings\r\n            loadCookieSettings();\r\n        }\r\n    }\r\n\r\n    // Hide cookie settings modal\r\n    function hideCookieSettings() {\r\n        const modal = document.getElementById('cookie-settings-modal');\r\n        if (modal) {\r\n            modal.classList.remove('show');\r\n            setTimeout(() => {\r\n                modal.style.display = 'none';\r\n            }, 300);\r\n        }\r\n    }\r\n\r\n    // Create cookie settings modal HTML\r\n    function createCookieSettingsModal() {\r\n        const modal = document.createElement('div');\r\n        modal.id = 'cookie-settings-modal';\r\n        modal.className = 'cookie-settings-modal';\r\n        modal.innerHTML = `\r\n            <div class=\"cookie-settings-content\">\r\n                <div class=\"cookie-settings-header\">\r\n                    <h3 data-i18n=\"cookies.settingsTitle\">Nastavenia cookies</h3>\r\n                    <button class=\"cookie-settings-close\" id=\"cookie-settings-close\" aria-label=\"Close\">\r\n                        <i class=\"fas fa-times\"></i>\r\n                    </button>\r\n                </div>\r\n                <div class=\"cookie-settings-body\">\r\n                    <p class=\"cookie-settings-description\" data-i18n=\"cookies.settingsDescription\">Vyberte, ktoré cookies chcete povoliť. Nevyhnutné cookies sú vždy aktívne, pretože sú potrebné pre základnú funkčnosť stránky.</p>\r\n                    \r\n                    <div class=\"cookie-category\">\r\n                        <div class=\"cookie-category-header\">\r\n                            <label class=\"cookie-category-label\">\r\n                                <input type=\"checkbox\" id=\"cookie-necessary\" checked disabled>\r\n                                <span class=\"cookie-category-name\" data-i18n=\"cookies.necessary\">Nevyhnutné cookies</span>\r\n                            </label>\r\n                        </div>\r\n                        <p class=\"cookie-category-desc\" data-i18n=\"cookies.necessaryDesc\">Tieto cookies sú nevyhnutné pre fungovanie webovej stránky a nemôžu byť vypnuté.</p>\r\n                    </div>\r\n\r\n                    <div class=\"cookie-category\">\r\n                        <div class=\"cookie-category-header\">\r\n                            <label class=\"cookie-category-label\">\r\n                                <input type=\"checkbox\" id=\"cookie-analytics\">\r\n                                <span class=\"cookie-category-name\" data-i18n=\"cookies.analytics\">Analytické cookies</span>\r\n                            </label>\r\n                        </div>\r\n                        <p class=\"cookie-category-desc\" data-i18n=\"cookies.analyticsDesc\">Pomáhajú nám pochopiť, ako návštevníci používajú našu stránku.</p>\r\n                    </div>\r\n\r\n                    <div class=\"cookie-category\">\r\n                        <div class=\"cookie-category-header\">\r\n                            <label class=\"cookie-category-label\">\r\n                                <input type=\"checkbox\" id=\"cookie-marketing\">\r\n                                <span class=\"cookie-category-name\" data-i18n=\"cookies.marketing\">Marketingové cookies</span>\r\n                            </label>\r\n                        </div>\r\n                        <p class=\"cookie-category-desc\" data-i18n=\"cookies.marketingDesc\">Používame ich na personalizáciu reklám a meranie ich účinnosti.</p>\r\n                    </div>\r\n                </div>\r\n                <div class=\"cookie-settings-footer\">\r\n                    <button id=\"cookie-settings-save\" class=\"cookie-btn cookie-btn-accept\" data-i18n=\"cookies.save\">Uložiť nastavenia</button>\r\n                    <button id=\"cookie-settings-cancel\" class=\"cookie-btn cookie-btn-reject\" data-i18n=\"cookies.close\">Zavrieť</button>\r\n                </div>\r\n            </div>\r\n        `;\r\n        document.body.appendChild(modal);\r\n        \r\n        // Apply translations\r\n        if (window.applyTranslations) {\r\n            window.applyTranslations();\r\n        }\r\n    }\r\n\r\n    // Load current cookie settings into modal\r\n    function loadCookieSettings() {\r\n        const consentData = getConsentData();\r\n        if (consentData) {\r\n            document.getElementById('cookie-necessary').checked = true; // Always checked\r\n            document.getElementById('cookie-analytics').checked = consentData.analytics === true;\r\n            document.getElementById('cookie-marketing').checked = consentData.marketing === true;\r\n        } else {\r\n            // Default: only necessary\r\n            document.getElementById('cookie-necessary').checked = true;\r\n            document.getElementById('cookie-analytics').checked = false;\r\n            document.getElementById('cookie-marketing').checked = false;\r\n        }\r\n    }\r\n\r\n    // Save cookie settings from modal\r\n    function saveCookieSettings() {\r\n        const consentData = {\r\n            necessary: true, // Always true\r\n            analytics: document.getElementById('cookie-analytics').checked,\r\n            marketing: document.getElementById('cookie-marketing').checked,\r\n            accepted: true // User has made a choice\r\n        };\r\n        saveConsent(consentData);\r\n        hideCookieSettings();\r\n        hideCookieBanner();\r\n        initAnalytics();\r\n        \r\n        // Reload YouTube videos based on new consent\r\n        loadYouTubeVideos();\r\n    }\r\n\r\n    // Accept all cookies\r\n    function acceptCookies() {\r\n        const consentData = {\r\n            necessary: true,\r\n            analytics: true,\r\n            marketing: true,\r\n            accepted: true\r\n        };\r\n        saveConsent(consentData);\r\n        hideCookieBanner();\r\n        initAnalytics();\r\n    }\r\n\r\n    // Reject all cookies (except necessary)\r\n    function rejectCookies() {\r\n        const consentData = {\r\n            necessary: true,\r\n            analytics: false,\r\n            marketing: false,\r\n            accepted: false\r\n        };\r\n        saveConsent(consentData);\r\n        hideCookieBanner();\r\n    }\r\n\r\n    // Check if analytics cookies are allowed\r\n    function hasAnalyticsConsent() {\r\n        const consentData = getConsentData();\r\n        return consentData && consentData.analytics === true;\r\n    }\r\n\r\n    // Load YouTube videos - use nocookie version if analytics not allowed\r\n    function loadYouTubeVideos() {\r\n        const useNoCookie = !hasAnalyticsConsent();\r\n        const domain = useNoCookie ? 'www.youtube-nocookie.com' : 'www.youtube.com';\r\n\r\n        // Find all YouTube iframe placeholders and load them\r\n        const placeholders = document.querySelectorAll('.youtube-placeholder[data-youtube-id]');\r\n        placeholders.forEach(placeholder => {\r\n            const videoId = placeholder.getAttribute('data-youtube-id');\r\n            const iframe = document.createElement('iframe');\r\n            iframe.src = `https://${domain}/embed/${videoId}`;\r\n            iframe.setAttribute('frameborder', '0');\r\n            iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');\r\n            iframe.setAttribute('allowfullscreen', '');\r\n            iframe.setAttribute('loading', 'lazy');\r\n            iframe.className = 'youtube-iframe';\r\n            \r\n            placeholder.replaceWith(iframe);\r\n        });\r\n\r\n        // Also load/update iframes that have data-youtube-id\r\n        const iframesWithDataId = document.querySelectorAll('iframe[data-youtube-id]');\r\n        iframesWithDataId.forEach(iframe => {\r\n            const videoId = iframe.getAttribute('data-youtube-id');\r\n            const currentSrc = iframe.getAttribute('src');\r\n            const newSrc = `https://${domain}/embed/${videoId}`;\r\n            \r\n            // Only update if src is different or missing\r\n            if (!currentSrc || !currentSrc.includes(domain)) {\r\n                iframe.src = newSrc;\r\n            }\r\n        });\r\n    }\r\n\r\n    // Initialize YouTube videos - always load them, but use nocookie version if analytics not allowed\r\n    function initializeYouTubeVideos() {\r\n        // Load all YouTube videos (they will use nocookie domain if analytics not allowed)\r\n        loadYouTubeVideos();\r\n    }\r\n\r\n    // Initialize analytics (only if consent given)\r\n    function initAnalytics() {\r\n        // Always initialize YouTube videos (they will use nocookie domain if analytics not allowed)\r\n        initializeYouTubeVideos();\r\n\r\n        const consentData = getConsentData();\r\n        if (consentData) {\r\n            // Initialize Google Analytics, Facebook Pixel, etc. here if analytics consent given\r\n            if (consentData.analytics === true) {\r\n                // Example:\r\n                // if (typeof gtag !== 'undefined') {\r\n                //     gtag('consent', 'update', {\r\n                //         'analytics_storage': 'granted'\r\n                //     });\r\n                // }\r\n            }\r\n\r\n            // Initialize marketing if consent given\r\n            if (consentData.marketing === true) {\r\n                // Initialize marketing tracking here\r\n            }\r\n        }\r\n    }\r\n\r\n    // Initialize cookie consent\r\n    function initCookieConsent() {\r\n        // Wait a bit for translations to be applied\r\n        setTimeout(() => {\r\n            // Check if consent already given\r\n            if (hasConsent()) {\r\n                const consentData = getConsentData();\r\n                if (consentData) {\r\n                    const expiryDate = new Date(consentData.expiry);\r\n                    \r\n                    // Check if consent expired\r\n                    if (new Date() > expiryDate) {\r\n                        localStorage.removeItem(COOKIE_CONSENT_KEY);\r\n                        // Still initialize YouTube videos with nocookie domain\r\n                        initAnalytics();\r\n                        showCookieBanner();\r\n                    } else {\r\n                        initAnalytics();\r\n                    }\r\n                }\r\n            } else {\r\n                // No consent yet, but still initialize YouTube videos with nocookie domain\r\n                initAnalytics();\r\n                showCookieBanner();\r\n            }\r\n\r\n            // Add event listeners (use event delegation to handle multiple banners)\r\n            document.addEventListener('click', (e) => {\r\n                if (e.target.id === 'cookie-accept' || e.target.closest('#cookie-accept')) {\r\n                    e.preventDefault();\r\n                    acceptCookies();\r\n                } else if (e.target.id === 'cookie-reject' || e.target.closest('#cookie-reject')) {\r\n                    e.preventDefault();\r\n                    rejectCookies();\r\n                } else if (e.target.id === 'cookie-settings' || e.target.closest('#cookie-settings')) {\r\n                    e.preventDefault();\r\n                    showCookieSettings();\r\n                } else if (e.target.id === 'cookie-settings-close' || e.target.closest('#cookie-settings-close')) {\r\n                    e.preventDefault();\r\n                    hideCookieSettings();\r\n                } else if (e.target.id === 'cookie-settings-cancel' || e.target.closest('#cookie-settings-cancel')) {\r\n                    e.preventDefault();\r\n                    hideCookieSettings();\r\n                } else if (e.target.id === 'cookie-settings-save' || e.target.closest('#cookie-settings-save')) {\r\n                    e.preventDefault();\r\n                    saveCookieSettings();\r\n                } else if (e.target.closest('#cookie-settings-modal') && e.target.id === 'cookie-settings-modal') {\r\n                    // Close modal when clicking on backdrop\r\n                    hideCookieSettings();\r\n                }\r\n            });\r\n        }, 500);\r\n    }\r\n\r\n    // Wait for DOM to be ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            initCookieConsent();\r\n            // Check YouTube videos after a short delay to ensure DOM is fully loaded\r\n            setTimeout(() => {\r\n                initAnalytics();\r\n            }, 1000);\r\n        });\r\n    } else {\r\n        initCookieConsent();\r\n        // Check YouTube videos after a short delay to ensure DOM is fully loaded\r\n        setTimeout(() => {\r\n            initAnalytics();\r\n        }, 1000);\r\n    }\r\n\r\n    // Export functions for external use\r\n    window.cookieConsent = {\r\n        accept: acceptCookies,\r\n        reject: rejectCookies,\r\n        hasConsent: hasConsent,\r\n        hasAnalyticsConsent: hasAnalyticsConsent,\r\n        showSettings: showCookieSettings,\r\n        loadYouTubeVideos: loadYouTubeVideos\r\n    };\r\n})();\r\n"],"names":["COOKIE_CONSENT_KEY","hasConsent","getConsentData","data","saveConsent","consentData","showCookieBanner","banner","hideCookieBanner","showCookieSettings","createCookieSettingsModal","modalElement","loadCookieSettings","hideCookieSettings","modal","saveCookieSettings","initAnalytics","loadYouTubeVideos","acceptCookies","rejectCookies","hasAnalyticsConsent","domain","placeholder","videoId","iframe","currentSrc","newSrc","initializeYouTubeVideos","initCookieConsent","expiryDate"],"mappings":"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"}